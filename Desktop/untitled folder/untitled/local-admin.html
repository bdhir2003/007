<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Admin Panel - Local</title>
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body>
    <!-- Authentication Check Script -->
    <script>
        (function() {
            // Check if user is authenticated
            const isAuthenticated = sessionStorage.getItem('adminAuthenticated');
            const loginTime = sessionStorage.getItem('adminLoginTime');
            const currentTime = Date.now();
            
            // Session expires after 2 hours (2 * 60 * 60 * 1000 = 7200000 ms)
            const sessionDuration = 2 * 60 * 60 * 1000;
            
            if (!isAuthenticated || !loginTime || (currentTime - parseInt(loginTime)) > sessionDuration) {
                // Clear expired session
                sessionStorage.removeItem('adminAuthenticated');
                sessionStorage.removeItem('adminLoginTime');
                
                // Redirect to login page
                window.location.href = 'secret-login-2025.html';
                return;
            }
        })();
    </script>

    <!-- Admin Header -->
    <header class="admin-header">
        <div class="admin-container">
            <h1>Portfolio Admin Panel - Local Mode</h1>
            
            <!-- Local Save Info -->
            <div class="local-save-section" style="background: #e8f5e8; border: 1px solid #4caf50; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                <h3 style="color: #2e7d32; margin-top: 0;">üíæ Local Testing Mode</h3>
                <p style="color: #666; margin-bottom: 15px;">Changes are saved locally and will appear immediately. No GitHub connection needed!</p>
                <button onclick="savePortfolio()" style="background: #4caf50; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px;">üíæ Save Portfolio</button>
            </div>
            
            <!-- Clear All Data Button -->
            <div class="clear-all-section" style="background: #ffebee; border: 1px solid #f44336; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                <h3 style="color: #d32f2f; margin-top: 0;">Clear All Data</h3>
                <p style="color: #666; margin-bottom: 15px;">This will completely clear all portfolio data and cached content.</p>
                <button onclick="clearAllData()" style="background: #f44336; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">Clear All Portfolio Data</button>
            </div>
        </div>
    </header>

    <!-- Admin Container -->
    <div class="admin-container">
        
        <!-- Personal Info Section -->
        <section class="admin-section">
            <h2>Personal Information</h2>
            <div class="form-group">
                <label for="fullName">Full Name</label>
                <input type="text" id="fullName" placeholder="Your full name">
            </div>
            <div class="form-group">
                <label for="title">Professional Title</label>
                <input type="text" id="title" placeholder="e.g., Software Developer, Designer">
            </div>
            <div class="form-group">
                <label for="bio">Bio</label>
                <textarea id="bio" rows="4" placeholder="Tell us about yourself..."></textarea>
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" placeholder="your.email@example.com">
            </div>
            <div class="form-group">
                <label for="phone">Phone</label>
                <input type="tel" id="phone" placeholder="+1 (555) 123-4567">
            </div>
            <div class="form-group">
                <label for="location">Location</label>
                <input type="text" id="location" placeholder="City, Country">
            </div>
        </section>

        <!-- Social Links Section -->
        <section class="admin-section">
            <h2>Social Links</h2>
            <div class="form-group">
                <label for="linkedin">LinkedIn Profile</label>
                <input type="url" id="linkedin" placeholder="https://linkedin.com/in/yourprofile">
            </div>
            <div class="form-group">
                <label for="github">GitHub Profile</label>
                <input type="url" id="github" placeholder="https://github.com/yourusername">
            </div>
            <div class="form-group">
                <label for="twitter">Twitter Profile</label>
                <input type="url" id="twitter" placeholder="https://twitter.com/yourusername">
            </div>
            <div class="form-group">
                <label for="website">Personal Website</label>
                <input type="url" id="website" placeholder="https://yourwebsite.com">
            </div>
        </section>

        <!-- Skills Section -->
        <section class="admin-section">
            <h2>Skills</h2>
            <div class="form-group">
                <label for="skills">Skills (comma-separated)</label>
                <textarea id="skills" rows="3" placeholder="JavaScript, Python, React, Node.js, etc."></textarea>
            </div>
        </section>

        <!-- Projects Section -->
        <section class="admin-section">
            <h2>Projects</h2>
            <div id="projectsContainer">
                <div class="project-item">
                    <h3>Project 1</h3>
                    <div class="form-group">
                        <label>Project Title</label>
                        <input type="text" class="project-title" placeholder="Project name">
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea class="project-description" rows="3" placeholder="Brief description of the project"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Technologies Used</label>
                        <input type="text" class="project-tech" placeholder="React, Node.js, MongoDB">
                    </div>
                    <div class="form-group">
                        <label>Live Demo URL</label>
                        <input type="url" class="project-demo" placeholder="https://yourproject.com">
                    </div>
                    <div class="form-group">
                        <label>GitHub URL</label>
                        <input type="url" class="project-github" placeholder="https://github.com/username/project">
                    </div>
                </div>
            </div>
            <button onclick="addProject()" class="add-btn">+ Add Another Project</button>
        </section>

        <!-- Education Section -->
        <section class="admin-section">
            <h2>Education</h2>
            <div id="educationContainer">
                <div class="education-item">
                    <h3>Education 1</h3>
                    <div class="form-group">
                        <label>Institution</label>
                        <input type="text" class="education-institution" placeholder="University name">
                    </div>
                    <div class="form-group">
                        <label>Degree</label>
                        <input type="text" class="education-degree" placeholder="Bachelor of Science in Computer Science">
                    </div>
                    <div class="form-group">
                        <label>Year</label>
                        <input type="text" class="education-year" placeholder="2020-2024">
                    </div>
                </div>
            </div>
            <button onclick="addEducation()" class="add-btn">+ Add Another Education</button>
        </section>

        <!-- Experience Section -->
        <section class="admin-section">
            <h2>Work Experience</h2>
            <div id="experienceContainer">
                <div class="experience-item">
                    <h3>Experience 1</h3>
                    <div class="form-group">
                        <label>Company</label>
                        <input type="text" class="experience-company" placeholder="Company name">
                    </div>
                    <div class="form-group">
                        <label>Position</label>
                        <input type="text" class="experience-position" placeholder="Job title">
                    </div>
                    <div class="form-group">
                        <label>Duration</label>
                        <input type="text" class="experience-duration" placeholder="Jan 2022 - Present">
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea class="experience-description" rows="3" placeholder="What did you do in this role?"></textarea>
                    </div>
                </div>
            </div>
            <button onclick="addExperience()" class="add-btn">+ Add Another Experience</button>
        </section>

        <!-- Action Buttons -->
        <div class="admin-actions">
            <button onclick="savePortfolio()" class="save-btn">üíæ Save Portfolio</button>
            <button onclick="loadData()" class="load-btn">üîÑ Load Saved Data</button>
            <button onclick="previewPortfolio()" class="preview-btn">üëÅÔ∏è Preview Portfolio</button>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Show messages to user
        function showMessage(message, type = 'info') {
            const existingMessage = document.querySelector('.admin-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'admin-message';
            messageDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 5px;
                color: white;
                font-weight: bold;
                z-index: 1000;
                max-width: 400px;
                ${type === 'success' ? 'background: #4caf50;' : 
                  type === 'error' ? 'background: #f44336;' : 'background: #2196f3;'}
            `;
            messageDiv.textContent = message;
            
            document.body.appendChild(messageDiv);
            
            // Auto-remove after 3 seconds
            setTimeout(() => {
                if (messageDiv.parentNode) {
                    messageDiv.remove();
                }
            }, 3000);
        }

        // Generate portfolio data from form inputs
        function generatePortfolioData() {
            const projects = [];
            document.querySelectorAll('.project-item').forEach(item => {
                const title = item.querySelector('.project-title').value.trim();
                if (title) {
                    projects.push({
                        title: title,
                        description: item.querySelector('.project-description').value,
                        technologies: item.querySelector('.project-tech').value,
                        demoUrl: item.querySelector('.project-demo').value,
                        githubUrl: item.querySelector('.project-github').value
                    });
                }
            });

            const education = [];
            document.querySelectorAll('.education-item').forEach(item => {
                const institution = item.querySelector('.education-institution').value.trim();
                if (institution) {
                    education.push({
                        institution: institution,
                        degree: item.querySelector('.education-degree').value,
                        year: item.querySelector('.education-year').value
                    });
                }
            });

            const experience = [];
            document.querySelectorAll('.experience-item').forEach(item => {
                const company = item.querySelector('.experience-company').value.trim();
                if (company) {
                    experience.push({
                        company: company,
                        position: item.querySelector('.experience-position').value,
                        duration: item.querySelector('.experience-duration').value,
                        description: item.querySelector('.experience-description').value
                    });
                }
            });

            return {
                personal: {
                    name: document.getElementById('fullName').value,
                    title: document.getElementById('title').value,
                    bio: document.getElementById('bio').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    location: document.getElementById('location').value
                },
                social: {
                    linkedin: document.getElementById('linkedin').value,
                    github: document.getElementById('github').value,
                    twitter: document.getElementById('twitter').value,
                    website: document.getElementById('website').value
                },
                skills: document.getElementById('skills').value.split(',').map(s => s.trim()).filter(s => s),
                projects: projects,
                education: education,
                experience: experience
            };
        }

        // Save portfolio data locally
        function savePortfolio() {
            const portfolioData = generatePortfolioData();
            
            // Save to localStorage
            localStorage.setItem('portfolioData', JSON.stringify(portfolioData));
            
            showMessage('‚úÖ Portfolio saved locally! Data is ready for your website.', 'success');
            console.log('Portfolio data saved:', portfolioData);
        }

        // Load data from localStorage
        function loadData() {
            const savedData = localStorage.getItem('portfolioData');
            if (!savedData) {
                showMessage('No saved data found.', 'info');
                return;
            }

            try {
                const data = JSON.parse(savedData);
                
                // Load personal info
                if (data.personal) {
                    document.getElementById('fullName').value = data.personal.name || '';
                    document.getElementById('title').value = data.personal.title || '';
                    document.getElementById('bio').value = data.personal.bio || '';
                    document.getElementById('email').value = data.personal.email || '';
                    document.getElementById('phone').value = data.personal.phone || '';
                    document.getElementById('location').value = data.personal.location || '';
                }

                // Load social links
                if (data.social) {
                    document.getElementById('linkedin').value = data.social.linkedin || '';
                    document.getElementById('github').value = data.social.github || '';
                    document.getElementById('twitter').value = data.social.twitter || '';
                    document.getElementById('website').value = data.social.website || '';
                }

                // Load skills
                if (data.skills) {
                    document.getElementById('skills').value = data.skills.join(', ');
                }

                showMessage('‚úÖ Data loaded successfully!', 'success');
            } catch (error) {
                showMessage('‚ùå Error loading data: ' + error.message, 'error');
            }
        }

        // Preview portfolio
        function previewPortfolio() {
            window.open('index.html', '_blank');
        }

        // Clear all data
        function clearAllData() {
            if (confirm('Are you sure you want to clear ALL portfolio data? This cannot be undone!')) {
                localStorage.clear();
                location.reload();
                showMessage('‚úÖ All data cleared!', 'success');
            }
        }

        // Add new project
        function addProject() {
            const container = document.getElementById('projectsContainer');
            const projectCount = container.children.length + 1;
            
            const projectDiv = document.createElement('div');
            projectDiv.className = 'project-item';
            projectDiv.innerHTML = `
                <h3>Project ${projectCount}</h3>
                <div class="form-group">
                    <label>Project Title</label>
                    <input type="text" class="project-title" placeholder="Project name">
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea class="project-description" rows="3" placeholder="Brief description of the project"></textarea>
                </div>
                <div class="form-group">
                    <label>Technologies Used</label>
                    <input type="text" class="project-tech" placeholder="React, Node.js, MongoDB">
                </div>
                <div class="form-group">
                    <label>Live Demo URL</label>
                    <input type="url" class="project-demo" placeholder="https://yourproject.com">
                </div>
                <div class="form-group">
                    <label>GitHub URL</label>
                    <input type="url" class="project-github" placeholder="https://github.com/username/project">
                </div>
                <button onclick="this.parentElement.remove()" class="remove-btn">Remove Project</button>
            `;
            
            container.appendChild(projectDiv);
        }

        // Add new education
        function addEducation() {
            const container = document.getElementById('educationContainer');
            const educationCount = container.children.length + 1;
            
            const educationDiv = document.createElement('div');
            educationDiv.className = 'education-item';
            educationDiv.innerHTML = `
                <h3>Education ${educationCount}</h3>
                <div class="form-group">
                    <label>Institution</label>
                    <input type="text" class="education-institution" placeholder="University name">
                </div>
                <div class="form-group">
                    <label>Degree</label>
                    <input type="text" class="education-degree" placeholder="Bachelor of Science in Computer Science">
                </div>
                <div class="form-group">
                    <label>Year</label>
                    <input type="text" class="education-year" placeholder="2020-2024">
                </div>
                <button onclick="this.parentElement.remove()" class="remove-btn">Remove Education</button>
            `;
            
            container.appendChild(educationDiv);
        }

        // Add new experience
        function addExperience() {
            const container = document.getElementById('experienceContainer');
            const experienceCount = container.children.length + 1;
            
            const experienceDiv = document.createElement('div');
            experienceDiv.className = 'experience-item';
            experienceDiv.innerHTML = `
                <h3>Experience ${experienceCount}</h3>
                <div class="form-group">
                    <label>Company</label>
                    <input type="text" class="experience-company" placeholder="Company name">
                </div>
                <div class="form-group">
                    <label>Position</label>
                    <input type="text" class="experience-position" placeholder="Job title">
                </div>
                <div class="form-group">
                    <label>Duration</label>
                    <input type="text" class="experience-duration" placeholder="Jan 2022 - Present">
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea class="experience-description" rows="3" placeholder="What did you do in this role?"></textarea>
                </div>
                <button onclick="this.parentElement.remove()" class="remove-btn">Remove Experience</button>
            `;
            
            container.appendChild(experienceDiv);
        }

        // Load data on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
        });
    </script>
</body>
</html>
